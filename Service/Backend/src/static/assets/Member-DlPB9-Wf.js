import{d as P,y as v,m as b,z as B,A as $,w as F,h as I,o as i,c,f as T,n as q,a as l,e as f,F as A,B as Q,p as U,t as z,q as h,b as u,x as m,_ as E}from"./index-CK62fWor.js";import{D as G}from"./DataTable-CPq6EEaf.js";import{F as L}from"./FunctionBall-HZzMzsrG.js";import{_ as O}from"./CustomSelect.vue_vue_type_script_setup_true_lang-S8JB5u0-.js";const j={key:0},H={key:1},J=["onClick"],K=["onClick"],N=["onClick"],R=["onClick"],W={key:1,id:"member-page-select-body",class:"container"},X={class:"col-6 mt-2"},Y="/apis/members",Z="fluid",ee=P({__name:"Member",setup(te){const g=[{label:"首次交流日期",depValue:"f_communication_time",width:"15%"},{label:"遊戲暱稱",depValue:"nickname",width:"15%",canSearch:!0},{label:"交流方式",depValue:"f_communication_way",width:"10%"},{label:"銀行帳戶",depValue:"accounts",width:"20%",canSearch:!0},{label:"遊戲分身",depValue:"sock_puppets",width:"10%",canSearch:!0},{label:"電話 / 手機號碼",depValue:"phones",width:"15%",canSearch:!0},{label:"操作",depValue:"operate",width:"15%"}],k=v(()=>({game_id:a.value})),o=b([]),a=b(""),p=b([]),x=v(()=>{let e=p.value.find(t=>t.value==a.value);return`會員列表 (${e==null?void 0:e.text})`}),y=[{text:"新增會員",icon:"plus-square",goPath:"/members/new"},{text:"選擇遊戲",icon:"arrow-return-left",method:()=>M()}];B(()=>{var e;w(),a.value=(e=$.members)==null?void 0:e.gameId}),F(a,e=>{Q("members",{gameId:e})});const w=()=>{I("get","/apis/games").then(e=>{console.log(e),p.value=e.data.map(t=>({text:t.name,value:t.id}))})},C=e=>{m("/members/edit",{editId:o.value[e].id})},D=e=>{m("/members/edit_accounts",{editId:o.value[e].id})},V=e=>{m("/members/edit_sock_puppets",{editId:o.value[e].id})},S=e=>{m("/members/edit_phones",{editId:o.value[e].id})},M=()=>{a.value=""};return(e,t)=>{const r=U("tooltip");return i(),c(A,null,[a.value?(i(),T(G,{key:0,titleText:x.value,fieldInfo:g,apiUrl:Y,urlQuery:k.value,containerSize:Z,dataCount:9,tableData:o.value,"onUpdate:tableData":t[0]||(t[0]=s=>o.value=s)},{tableCell:q(({fieldName:s,hasData:_,dataIndex:n})=>[s=="f_communication_time"&&_?(i(),c("div",j,z(o.value[n][s].slice(0,10)),1)):h("",!0),s=="operate"&&_?(i(),c("div",H,[u(l("i",{class:"bi-pencil-square text-primary fs-4 mx-2",role:"button",onClick:d=>C(n)},null,8,J),[[r,"編輯會員"]]),u(l("i",{class:"bi-bank text-primary fs-4 mx-2",role:"button",onClick:d=>D(n)},null,8,K),[[r,"編輯帳戶"]]),u(l("i",{class:"bi-people-fill text-primary fs-4 mx-2",role:"button",onClick:d=>V(n)},null,8,N),[[r,"編輯分身"]]),u(l("i",{class:"bi-phone text-primary fs-4 mx-2",role:"button",onClick:d=>S(n)},null,8,R),[[r,"編輯手機"]])])):h("",!0)]),_:1},8,["titleText","urlQuery","tableData"])):(i(),c("div",W,[t[2]||(t[2]=l("h3",null,"會員列表",-1)),t[3]||(t[3]=l("h3",null,"請選擇遊戲類別",-1)),l("div",X,[f(O,{options:p.value,inputData:a.value,"onUpdate:inputData":t[1]||(t[1]=s=>a.value=s)},null,8,["options","inputData"])])])),f(L,{functionList:y})],64)}}}),ne=E(ee,[["__scopeId","data-v-5f1fba9e"]]);export{ne as default};
