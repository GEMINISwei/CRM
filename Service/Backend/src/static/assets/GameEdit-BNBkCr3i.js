import{d as p,r as n,y as f,z as g,x as r,h as l,o as _,c as y,a as V,e as h,A as x,k as d}from"./index-CK62fWor.js";import{_ as b}from"./CustomForm.vue_vue_type_script_setup_true_lang-CDWfceke.js";import"./CustomSelect.vue_vue_type_script_setup_true_lang-S8JB5u0-.js";const X={class:"container"},$=p({__name:"GameEdit",setup(v){const s=n([{label:"遊戲名稱",type:"text",depValue:"name",required:!0,disabled:!0},{label:"入金 - 遊戲幣匯率 (台幣 : 遊戲幣 - 1 : XXX)",type:"float",depValue:"money_in_exchange",required:!0},{label:"出金 - 遊戲幣匯率 (台幣 : 遊戲幣 - 1 : XXX)",type:"float",depValue:"money_out_exchange",required:!0},{label:"交易手續費 (台幣)",type:"number",depValue:"charge_fee"},{label:"遊戲幣手續費",type:"float",depValue:"game_coin_fee"}]),t=n(s.reduce((e,a)=>({...e,[a.depValue]:""}),{})),m=[{color:"secondary",text:"返回",method:()=>r("/games")},{color:"primary",text:"更新",method:()=>c(),needValid:!0}],o=f(()=>{var e;return(e=x.games)==null?void 0:e.editId});g(()=>{o.value?u():r("/games")});const u=()=>{l("get",`/apis/games/${o.value}`).then(e=>{s.forEach(a=>{t[a.depValue]=e[a.depValue]})})},c=()=>{l("patch",`/apis/games/${o.value}`,t).then(e=>{d("success",`遊戲類別 "${e.name}" 資料更新成功 !`),r("/games")}).catch(e=>{e.status==405&&d("info","內容無變更, 請確認更新資訊 !")})};return(e,a)=>(_(),y("div",X,[a[1]||(a[1]=V("h3",{class:"m-4 text-center"},"編輯遊戲類別",-1)),h(b,{fields:s,buttons:m,formData:t,"onUpdate:formData":a[0]||(a[0]=i=>t=i)},null,8,["fields","formData"])]))}});export{$ as default};
