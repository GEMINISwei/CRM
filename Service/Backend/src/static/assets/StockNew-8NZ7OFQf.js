import{d as p,r,z as u,h as l,o as f,c as _,a as g,e as x,x as d,s as n,k}from"./index-CK62fWor.js";import{_ as V}from"./CustomForm.vue_vue_type_script_setup_true_lang-CDWfceke.js";import"./CustomSelect.vue_vue_type_script_setup_true_lang-S8JB5u0-.js";const h={class:"container"},v=p({__name:"StockNew",setup(y){const s=r([{label:"名稱",type:"text",depValue:"role_name",required:!0},{label:"遊戲類別",type:"select",depValue:"game_id",required:!0},{label:"角色數量",type:"text",depValue:"init_amount"}]),o=r({}),c=[{color:"success",text:"返回",method:()=>d("/stocks")},{color:"primary",text:"新增",method:()=>m(),needValid:!0}];u(()=>{i()});const i=()=>{l("get","/apis/games").then(a=>{let e=s.findIndex(t=>t.depValue=="game_id");s[e].options=a.data.map(t=>({text:t.name,value:t.id}))})},m=()=>{n("loading",!0),l("post","/apis/stocks",o).then(a=>{k("success",`庫存角色 "${a.data.role_name}" 新增成功`),n("loading",!1),d("/stocks")}).catch(()=>{n("loading",!1)})};return(a,e)=>(f(),_("div",h,[e[1]||(e[1]=g("h3",{class:"m-4 text-center"},"新增庫存角色",-1)),x(V,{fields:s,buttons:c,formData:o,"onUpdate:formData":e[0]||(e[0]=t=>o=t)},null,8,["fields","formData"])]))}});export{v as default};
