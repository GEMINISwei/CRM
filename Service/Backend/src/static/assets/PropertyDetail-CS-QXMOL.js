import{d as x,y as T,A as i,m as $,z as N,x as c,w as S,o as d,c as r,e as q,n as F,a as n,u as U,F as B,p as E,b as p,q as I,t as K,h,k as m,s as w,l as P}from"./index-CK62fWor.js";import{D as z}from"./DataTable-CPq6EEaf.js";const A={key:0},j=["onClick"],M=["onClick"],Q=["onClick"],G={key:1},H={class:"d-flex justify-content-center"},J="/apis/trades",L="fluid",X=x({__name:"PropertyDetail",setup(O){var u,_;const f=T(()=>{var e;let a=[];switch((e=i.properties)==null?void 0:e.showKind){case"bank":a=[{label:"交流時間",depValue:"time_at",width:"10%"},{label:"遊戲暱稱",depValue:"member_game_name",width:"7%"},{label:"庫存角色",depValue:"stock_role_name",width:"7%"},{label:"種類",depValue:"base_type",width:"7%"},{label:"金額",depValue:"money",width:"7%"},{label:"手續費",depValue:"charge_fee",width:"7%"},{label:"餘額",depValue:"balance",width:"7%"},{label:"遊戲幣",depValue:"game_coin",width:"7%"},{label:"遊戲類別",depValue:"member_game_kind",width:"7%"},{label:"編號",depValue:"custom_no",width:"7%"},{label:"末五碼",depValue:"last_five_code",width:"7%"},{label:"時間紀錄",depValue:"record_time",width:"10%"},{label:"操作",depValue:"operate",width:"10%"}];break;case"supermarket":a=[{label:"交流時間",depValue:"time_at",width:"10%"},{label:"遊戲暱稱",depValue:"member_game_name",width:"9%"},{label:"庫存角色",depValue:"stock_role_name",width:"9%"},{label:"繳費金額",depValue:"money",width:"9%"},{label:"實收金額",depValue:"real_in",width:"9%"},{label:"遊戲幣",depValue:"game_coin",width:"9%"},{label:"遊戲類別",depValue:"member_game_kind",width:"9%"},{label:"編號",depValue:"custom_no",width:"9%"},{label:"繳費代碼",depValue:"pay_code",width:"9%"},{label:"門市",depValue:"store",width:"8%"},{label:"操作",depValue:"operate",width:"10%"}];break;case"v_account":a=[{label:"交流時間",depValue:"time_at",width:"9%"},{label:"遊戲暱稱",depValue:"member_game_name",width:"9%"},{label:"庫存角色",depValue:"stock_role_name",width:"9%"},{label:"繳費金額",depValue:"money",width:"9%"},{label:"實收金額",depValue:"real_in",width:"9%"},{label:"遊戲幣",depValue:"game_coin",width:"9%"},{label:"遊戲類別",depValue:"member_game_kind",width:"9%"},{label:"編號",depValue:"custom_no",width:"9%"},{label:"末五碼",depValue:"last_five_code",width:"9%"},{label:"虛擬帳戶",depValue:"v_account",width:"9%"},{label:"操作",depValue:"operate",width:"10%"}];break}return a}),V=`${(u=i.properties)==null?void 0:u.showTitle} - 交流紀錄`,k={property_id:(_=i.properties)==null?void 0:_.showId},s=$([]);N(()=>{i.properties===void 0&&c("/properties")}),S(s,a=>{a.forEach(e=>{let t="",l="";e.second_check?t=e.second_check:e.first_check&&(t=e.first_check),t=="早班"?l="background: #e0ffcf;":t=="晚班"&&(l="background: #fff6cf;"),e.customStyle=l})});const y=(a,e)=>{let t=s.value[e][a];switch(a){case"base_type":t=="money_in"?t="入金":t=="money_out"&&(t="出金");break}return t},v=a=>{var e,t,l;c("/trades/edit",{editId:s.value[a].id,showKind:(e=i.properties)==null?void 0:e.showKind,propertyName:(t=i.properties)==null?void 0:t.showTitle,propertyId:(l=i.properties)==null?void 0:l.showId,basyType:s.value[a].base_type})},g=a=>{h("delete",`/apis/trades/${s.value[a].id}`).then(e=>{m("question","一筆交流紀錄已取消 !"),w("dataNeedUpdate",!0)})},C=a=>{let e={second_check:P.shift};h("patch",`/apis/trades/${s.value[a].id}/check`,e).then(t=>{m("question","一筆交流紀錄已檢查 !"),w("dataNeedUpdate",!0)})};return(a,e)=>{const t=E("tooltip");return d(),r(B,null,[q(z,{titleText:V,fieldInfo:f.value,apiUrl:J,urlQuery:k,containerSize:L,tableData:s.value,"onUpdate:tableData":e[0]||(e[0]=l=>s.value=l)},{tableCell:F(({fieldName:l,dataIndex:o,hasData:D})=>[l=="operate"&&D?(d(),r("div",A,[p(n("i",{class:"bi-pencil-square text-primary fs-4 mx-2",role:"button",onClick:b=>v(o)},null,8,j),[[t,"編輯交流"]]),s.value[o].second_check?I("",!0):p((d(),r("i",{key:0,class:"bi-check-circle text-success fs-4 mx-2",role:"button",onClick:b=>C(o)},null,8,M)),[[t,"檢查完成"]]),p(n("i",{class:"bi-ban text-danger fs-4 mx-2",role:"button",onClick:b=>g(o)},null,8,Q),[[t,"取消此筆"]])])):(d(),r("span",G,K(y(l,o)),1))]),_:1},8,["fieldInfo","tableData"]),n("div",H,[n("button",{class:"btn btn-secondary",onClick:e[1]||(e[1]=l=>U(c)("/properties"))},"返回列表")])],64)}}});export{X as default};
