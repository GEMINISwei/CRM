import{d as T,D as U,E as F,m,y as C,r as P,G as Q,z as S,o,c as a,a as s,t as v,F as p,g as y,q as _,s as x,h as w,b as E,H as A,I as B,J as $,K,_ as q}from"./index-CK62fWor.js";const z={class:"container"},O={class:"d-flex mt-4 ms-5 me-5"},R={class:"col-4 ms-4"},G={class:"col-8 d-flex justify-content-end"},H=["placeholder","onUpdate:modelValue"],J={class:"d-flex flex-wrap justify-content-center"},L=["role","onClick"],W={class:"text-center"},Y={class:"card-body"},X={class:"col-3 text-center"},Z={key:0,class:"d-flex justify-content-center mt-3"},N={class:"pagination"},ee=T({__name:"DataCard",props:U({titleText:{default:""},fieldInfo:{},apiUrl:{default:""},urlQuery:{default:void 0},cardClick:{type:Function,default:void 0}},{tableData:{required:!0},tableDataModifiers:{}}),emits:["update:tableData"],setup(b){const n=b,u=F(b,"tableData"),c=m(1),f=m(1),D=C(()=>Math.ceil(u.value.length/3)*3),k=C(()=>n.fieldInfo.filter(l=>l.canSearch)),d=P(k.value.reduce((l,t)=>({...l,[t.depValue]:""}),{}));Q(),S(()=>{g()});const h=l=>{if(n.apiUrl!=""){let t=`${n.apiUrl}?count=100&page=${c.value}`;x("loading",!0),l!==void 0&&(t+=l),w("get",t).then(e=>{console.log(e),u.value=e.data,f.value=e.info.pageCount>0?e.info.pageCount:1,x("loading",!1)})}},V=(l,t)=>{let e="-";switch(typeof(l==null?void 0:l[t])){case"boolean":(l==null?void 0:l[t])===!0?e="Y":(l==null?void 0:l[t])===!1&&(e="N");break;case"number":e=`${l==null?void 0:l[t]}`;break;case"string":e=l==null?void 0:l[t];break;case"object":Array.isArray(l[t])&&l[t].length>0&&(e=l[t].join(", "));break}return e},j=()=>{c.value>1&&(c.value-=1,g())},I=()=>{c.value<f.value&&(c.value+=1,g())},g=(l=!1)=>{let t="";n.urlQuery&&Object.keys(n.urlQuery).forEach(e=>{var r;t+=`&${e}=${(r=n.urlQuery)==null?void 0:r[e]}`}),Object.keys(d).forEach(e=>{d[e].length>0&&(t+=`&${e}=${d[e]}`)}),l&&(c.value=1),t.length>0?h(t):h()},M=l=>{let t="";return u.value[l]&&(t=u.value[l][n.fieldInfo[0].depValue]),t};return(l,t)=>(o(),a("div",z,[s("div",O,[s("h2",R,v(n.titleText),1),s("div",G,[(o(!0),a(p,null,y(k.value,(e,r)=>(o(),a("div",{key:r,class:"mx-3 my-auto"},[E(s("input",{class:"form-control",type:"text",placeholder:e.label,"onUpdate:modelValue":i=>d[e.depValue]=i,onKeyup:t[0]||(t[0]=B(i=>g(!0),["enter"]))},null,40,H),[[A,d[e.depValue]]])]))),128))])]),s("div",J,[(o(!0),a(p,null,y(D.value,e=>(o(),a("div",{key:e,class:$(`card m-3 ${e>u.value.length?"invisible":""}`)},[s("div",{class:"card-header",role:`${typeof n.cardClick=="function"?"button":""}`,onClick:r=>{var i;return(i=n.cardClick)==null?void 0:i.call(n,e-1)}},[s("h3",W,v(M(e-1)),1)],8,L),s("div",Y,[(o(!0),a(p,null,y(l.fieldInfo,(r,i)=>(o(),a("div",{key:r.label,class:"container d-flex column card-field-data"},[i>0?(o(),a(p,{key:0},[s("span",X,v(r.label),1),K(l.$slots,"tableCell",{fieldName:r.depValue,hasData:e-1<u.value.length,dataIndex:e-1},()=>[s("span",null,v(V(u.value[e-1],r.depValue)),1)])],64)):_("",!0)]))),128))])],2))),128))]),f.value>1?(o(),a("div",Z,[s("nav",null,[s("ul",N,[s("li",{class:"page-item",role:"button",onClick:t[1]||(t[1]=e=>j())},t[4]||(t[4]=[s("span",{class:"page-link"},"«",-1)])),(o(!0),a(p,null,y(f.value,e=>(o(),a("li",{key:e,class:"page-item",role:"button",onClick:t[2]||(t[2]=()=>{})},[s("span",{class:$(`page-link ${c.value==e?"active":""}`)},v(e),3)]))),128)),s("li",{class:"page-item",role:"button",onClick:t[3]||(t[3]=e=>I())},t[5]||(t[5]=[s("span",{class:"page-link"},"»",-1)]))])])])):_("",!0)]))}}),le=q(ee,[["__scopeId","data-v-88a788c2"]]);export{le as D};
