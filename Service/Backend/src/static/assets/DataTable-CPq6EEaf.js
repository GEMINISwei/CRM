import{d as A,D as z,E as F,m as g,y as M,r as P,G as Q,z as B,w as E,o as a,c as n,a as s,t as i,F as p,g as v,q as K,J as V,f as x,T as S,L as q,s as h,h as L,b as O,H as G,I as H,M as J,K as R,_ as W}from"./index-CK62fWor.js";const Y={class:"d-flex mt-4 ms-5 me-5"},X={class:"col-4 ms-4"},Z={class:"col-8 d-flex justify-content-end"},N=["placeholder","onUpdate:modelValue"],ee={class:"d-flex justify-content-center"},te={class:"table table-primary"},le=["width"],se=["onClick"],ae={key:1},ne={key:0,class:"d-flex justify-content-center"},oe={class:"pagination"},re=["onClick"],ue={class:"d-flex justify-content-center row"},ce=A({__name:"DataTable",props:z({titleText:{default:""},dataCount:{default:10},fieldInfo:{},apiUrl:{default:""},urlQuery:{default:void 0},containerSize:{default:""}},{tableData:{required:!0},tableDataModifiers:{}}),emits:["update:tableData"],setup(m){const u=m,b=F(m,"tableData"),c=g(1),f=g(1),k=g(""),_=g([]),$=M(()=>u.fieldInfo.filter(t=>t.canSearch)),y=P($.value.reduce((t,l)=>({...t,[l.depValue]:""}),{}));Q(),B(()=>{d()}),E(()=>q.dataNeedUpdate,t=>{t&&d()});const D=t=>{if(u.apiUrl!=""){let l=`${u.apiUrl}?count=${u.dataCount}&page=${c.value}`;h("loading",!0),t!==void 0&&(l+=t),L("get",l).then(e=>{console.log(e),b.value=e.data,f.value=e.info.pageCount>0?e.info.pageCount:1,h("dataNeedUpdate",!1),h("loading",!1)})}},C=(t,l)=>{let e="-";switch(typeof(t==null?void 0:t[l])){case"boolean":(t==null?void 0:t[l])===!0?e="Y":(t==null?void 0:t[l])===!1&&(e="N");break;case"number":e=`${t==null?void 0:t[l]}`;break;case"string":e=t==null?void 0:t[l];break;case"object":Array.isArray(t[l])&&t[l].length>0&&(e=t[l][0]);break}return e},w=()=>{c.value>1&&(c.value-=1,d())},T=()=>{c.value<f.value&&(c.value+=1,d())},I=t=>{c.value=t,d()},d=(t=!1)=>{let l="";u.urlQuery&&Object.keys(u.urlQuery).forEach(e=>{var o;l+=`&${e}=${(o=u.urlQuery)==null?void 0:o[e]}`}),Object.keys(y).forEach(e=>{y[e].length>0&&(l+=`&${e}=${y[e]}`)}),t&&(c.value=1),l.length>0?D(l):D()},U=t=>Array.isArray(t)&&t.length>0,j=(t,l)=>{let e=u.fieldInfo.find(o=>o.depValue==t);k.value=e?e.label:"",_.value=l[t],h("modalShow",!0)};return(t,l)=>(a(),n(p,null,[s("div",{class:V(`container${t.containerSize?`-${t.containerSize}`:""}`)},[s("div",Y,[s("h2",X,i(u.titleText),1),s("div",Z,[(a(!0),n(p,null,v($.value,(e,o)=>(a(),n("div",{key:o,class:"mx-3 my-auto"},[O(s("input",{class:"form-control",type:"text",placeholder:e.label,"onUpdate:modelValue":r=>y[e.depValue]=r,onKeyup:l[0]||(l[0]=H(r=>d(!0),["enter"]))},null,40,N),[[G,y[e.depValue]]])]))),128))])]),s("div",ee,[s("table",te,[s("thead",null,[s("tr",null,[(a(!0),n(p,null,v(t.fieldInfo,e=>(a(),n("th",{key:e.label,width:e.width},[s("span",null,i(e.label),1)],8,le))),128))])]),s("tbody",null,[(a(!0),n(p,null,v(b.value,(e,o)=>(a(),n("tr",{key:o},[(a(!0),n(p,null,v(t.fieldInfo,r=>(a(),n("td",{key:r.label,style:J(e.customStyle)},[R(t.$slots,"tableCell",{fieldName:r.depValue,hasData:o<b.value.length,dataIndex:o},()=>[U(e[r.depValue])&&e[r.depValue].length>1?(a(),n("span",{key:0,class:"text-primary",role:"button",onClick:ie=>j(r.depValue,e)},i(C(e,r.depValue)),9,se)):(a(),n("span",ae,i(C(e,r.depValue)),1))],!0)],4))),128))]))),128))])])]),f.value>1?(a(),n("div",ne,[s("nav",null,[s("ul",oe,[s("li",{class:"page-item",role:"button",onClick:l[1]||(l[1]=e=>w())},l[3]||(l[3]=[s("span",{class:"page-link"},"«",-1)])),(a(!0),n(p,null,v(f.value,e=>(a(),n("li",{key:e,class:"page-item",role:"button",onClick:o=>I(e)},[s("span",{class:V(`page-link ${c.value==e?"active":""}`)},i(e),3)],8,re))),128)),s("li",{class:"page-item",role:"button",onClick:l[2]||(l[2]=e=>T())},l[4]||(l[4]=[s("span",{class:"page-link"},"»",-1)]))])])])):K("",!0)],2),(a(),x(S,{to:"#modal-header"},[s("h3",null,i(k.value),1)])),(a(),x(S,{to:"#modal-body"},[s("div",ue,[(a(!0),n(p,null,v(_.value,e=>(a(),n("p",{key:e,class:"text-center"},i(e),1))),128))])]))],64))}}),de=W(ce,[["__scopeId","data-v-2cc71a02"]]);export{de as D};
