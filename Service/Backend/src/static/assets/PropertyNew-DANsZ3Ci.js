import{d,r as n,w as p,o as u,c as m,a as f,e as x,x as l,s as r,h as _,k as h}from"./index-CK62fWor.js";import{_ as k}from"./CustomForm.vue_vue_type_script_setup_true_lang-CDWfceke.js";import"./CustomSelect.vue_vue_type_script_setup_true_lang-S8JB5u0-.js";const b={class:"container"},N=d({__name:"PropertyNew",setup(g){const s=n([{label:"名稱",type:"text",depValue:"name",required:!0},{label:"類型",type:"select",depValue:"kind",required:!0,options:[{text:"銀行轉帳",value:"bank"},{text:"超商代收",value:"supermarket"},{text:"虛擬帳號",value:"v_account"}]},{label:"帳戶",type:"text",depValue:"account"},{label:"初始金額",type:"text",depValue:"init_amount"}]),t=n({}),c=[{color:"success",text:"返回",method:()=>l("/properties")},{color:"primary",text:"新增",method:()=>i(),needValid:!0}];p(()=>t.kind,a=>{let e=s.findIndex(o=>o.depValue=="account");a=="supermarket"||a==""?(s[e].disabled=!0,t.account=""):s[e].disabled=!1});const i=()=>{r("loading",!0),_("post","/apis/properties",t).then(a=>{h("success",`銀行 "${a.name}" 新增成功`),r("loading",!1),l("/properties")}).catch(()=>{r("loading",!1)})};return(a,e)=>(u(),m("div",b,[e[1]||(e[1]=f("h3",{class:"m-4 text-center"},"新增資產",-1)),x(k,{fields:s,buttons:c,formData:t,"onUpdate:formData":e[0]||(e[0]=o=>t=o)},null,8,["fields","formData"])]))}});export{N as default};
